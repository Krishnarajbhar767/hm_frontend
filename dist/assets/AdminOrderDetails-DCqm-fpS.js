import{aE as fe,r as Y,j as e,W as ye,aF as be,i as pe,h as je,x as ve,m as W,a8 as de,b as me,ak as ue,aG as Ne,aH as we,a3 as xe,aI as Ae,aJ as Pe,aK as Se,u as Ee,ad as ke,al as Te}from"./index-DRzNUvPi.js";import{u as Ce}from"./uploadMedia-C7vyjgeF.js";import{F as re,T as oe}from"./Constant-B8kb6R2V.js";import{R as Fe}from"./ReceiptPreview-D9eF5Rwq.js";var le={exports:{}},De=le.exports,he;function Re(){return he||(he=1,function(s,t){(function(h,o){s.exports=o(fe())})(typeof self<"u"?self:De,function(h){return function(){var o={155:function(a){a.exports=h}},j={};function d(a){var n=j[a];if(n!==void 0)return n.exports;var r=j[a]={exports:{}};return o[a](r,r.exports,d),r.exports}d.d=function(a,n){for(var r in n)d.o(n,r)&&!d.o(a,r)&&Object.defineProperty(a,r,{enumerable:!0,get:n[r]})},d.o=function(a,n){return Object.prototype.hasOwnProperty.call(a,n)},d.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var y={};d.r(y),d.d(y,{useReactToPrint:function(){return M}});var v=d(155);function p({level:a="error",messages:n,suppressErrors:r=!1}){r||(a==="error"?console.error(n):a==="warning"?console.warn(n):console.debug(n))}function S(a,n){if(n||!a){const r=document.getElementById("printWindow");r&&document.body.removeChild(r)}}function w(a){return a instanceof Error?a:new Error("Unknown Error")}function E(a,n){const{documentTitle:r,onAfterPrint:g,onPrintError:T,preserveAfterPrint:F,print:I,suppressErrors:D}=n;setTimeout(()=>{var k,C;if(a.contentWindow){let V=function(){g==null||g(),S(F)};if(a.contentWindow.focus(),I)I(a).then(V).catch(R=>{T?T("print",w(R)):p({messages:["An error was thrown by the specified `print` function"],suppressErrors:D})});else{if(a.contentWindow.print){const R=(C=(k=a.contentDocument)===null||k===void 0?void 0:k.title)!==null&&C!==void 0?C:"",U=a.ownerDocument.title;r&&(a.ownerDocument.title=r,a.contentDocument&&(a.contentDocument.title=r)),a.contentWindow.print(),r&&(a.ownerDocument.title=U,a.contentDocument&&(a.contentDocument.title=R))}else p({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:D});[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(R=>{var U,$;return(($=(U=navigator.userAgent)!==null&&U!==void 0?U:navigator.vendor)!==null&&$!==void 0?$:"opera"in window&&window.opera).match(R)})?setTimeout(V,500):V()}}else p({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:D})},500)}function i(a){const n=[],r=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,null);let g=r.nextNode();for(;g;)n.push(g),g=r.nextNode();return n}function m(a,n,r){const g=i(a),T=i(n);if(g.length===T.length)for(let F=0;F<g.length;F++){const I=g[F],D=T[F],k=I.shadowRoot;if(k!==null){const C=D.attachShadow({mode:k.mode});C.innerHTML=k.innerHTML,m(k,C,r)}}else p({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",a,n],suppressErrors:r})}const u=`
    @page {
        /* Remove browser default header (title) and footer (url) */
        margin: 0;
    }
    @media print {
        body {
            /* Tell browsers to print background colors */
            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */
            print-color-adjust: exact; /* Firefox/Safari */
            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
        }
    }
`;function A(a,n,r,g){var T,F,I,D,k;const{contentNode:C,clonedContentNode:V,clonedImgNodes:R,clonedVideoNodes:U,numResourcesToLoad:$,originalCanvasNodes:te}=r,{bodyClass:se,fonts:_,ignoreGlobalStyles:ne,pageStyle:Z,nonce:q,suppressErrors:f,copyShadowRoots:K}=g;a.onload=null;const b=(T=a.contentDocument)!==null&&T!==void 0?T:(F=a.contentWindow)===null||F===void 0?void 0:F.document;if(b){const H=b.body.appendChild(V);K&&m(C,H,!!f),_&&(!((I=a.contentDocument)===null||I===void 0)&&I.fonts&&(!((D=a.contentWindow)===null||D===void 0)&&D.FontFace)?_.forEach(c=>{const l=new FontFace(c.family,c.source,{weight:c.weight,style:c.style});a.contentDocument.fonts.add(l),l.loaded.then(()=>{n(l)}).catch(P=>{n(l,["Failed loading the font:",l,"Load error:",w(P)])})}):(_.forEach(c=>{n(c)}),p({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:f})));const X=Z??u,Q=b.createElement("style");q&&(Q.setAttribute("nonce",q),b.head.setAttribute("nonce",q)),Q.appendChild(b.createTextNode(X)),b.head.appendChild(Q),se&&b.body.classList.add(...se.split(" "));const z=b.querySelectorAll("canvas");for(let c=0;c<te.length;++c){const l=te[c],P=z[c];if(P===void 0){p({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",l],suppressErrors:f});continue}const x=P.getContext("2d");x&&x.drawImage(l,0,0)}for(let c=0;c<R.length;c++){const l=R[c],P=l.getAttribute("src");if(P){const x=new Image;x.onload=()=>{n(l)},x.onerror=(N,O,J,L,G)=>{n(l,["Error loading <img>",l,"Error",G])},x.src=P}else n(l,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',l])}for(let c=0;c<U.length;c++){const l=U[c];l.preload="auto";const P=l.getAttribute("poster");if(P){const x=new Image;x.onload=()=>{n(l)},x.onerror=(N,O,J,L,G)=>{n(l,["Error loading video poster",P,"for video",l,"Error:",G])},x.src=P}else l.readyState>=2?n(l):l.src?(l.onloadeddata=()=>{n(l)},l.onerror=(x,N,O,J,L)=>{n(l,["Error loading video",l,"Error",L])},l.onstalled=()=>{n(l,["Loading video stalled, skipping",l])}):n(l,["Error loading video, `src` is empty",l])}const B="select",ae=C.querySelectorAll(B),ie=b.querySelectorAll(B);for(let c=0;c<ae.length;c++)ie[c].value=ae[c].value;if(!ne){const c=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let l=0,P=c.length;l<P;++l){const x=c[l];if(x.tagName.toLowerCase()==="style"){const N=b.createElement(x.tagName),O=x.sheet;if(O){let J="";try{const L=O.cssRules.length;for(let G=0;G<L;++G)typeof O.cssRules[G].cssText=="string"&&(J+=`${O.cssRules[G].cssText}\r
`)}catch(L){p({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",x,`Original error: ${w(L).message}`],level:"warning"})}N.setAttribute("id",`react-to-print-${l}`),q&&N.setAttribute("nonce",q),N.appendChild(b.createTextNode(J)),b.head.appendChild(N)}}else if(x.getAttribute("href"))if(x.hasAttribute("disabled"))p({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",x],level:"warning"}),n(x);else{const N=b.createElement(x.tagName);for(let O=0,J=x.attributes.length;O<J;++O){const L=x.attributes[O];L&&N.setAttribute(L.nodeName,(k=L.nodeValue)!==null&&k!==void 0?k:"")}N.onload=()=>{n(N)},N.onerror=(O,J,L,G,ge)=>{n(N,["Failed to load",N,"Error:",ge])},q&&N.setAttribute("nonce",q),b.head.appendChild(N)}else p({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",x],level:"warning"}),n(x)}}}$===0&&E(a,g)}function M({bodyClass:a,contentRef:n,copyShadowRoots:r,documentTitle:g,fonts:T,ignoreGlobalStyles:F,nonce:I,onAfterPrint:D,onBeforePrint:k,onPrintError:C,pageStyle:V,preserveAfterPrint:R,print:U,suppressErrors:$}){return(0,v.useCallback)(te=>{function se(){const _={bodyClass:a,contentRef:n,copyShadowRoots:r,documentTitle:g,fonts:T,ignoreGlobalStyles:F,nonce:I,onAfterPrint:D,onPrintError:C,pageStyle:V,preserveAfterPrint:R,print:U,suppressErrors:$},ne=function(){const f=document.createElement("iframe");return f.width=`${document.documentElement.clientWidth}px`,f.height=`${document.documentElement.clientHeight}px`,f.style.position="absolute",f.style.top=`-${document.documentElement.clientHeight+100}px`,f.style.left=`-${document.documentElement.clientWidth+100}px`,f.id="printWindow",f.srcdoc="<!DOCTYPE html>",f}(),Z=function(f,K){const{contentRef:b,fonts:H,ignoreGlobalStyles:X,suppressErrors:Q}=K,z=function({contentRef:P,optionalContent:x,suppressErrors:N}){return x&&typeof x=="function"?(P&&p({level:"warning",messages:['"react-to-print" received a `contentRef` option and an optional-content param passed to its callback. The `contentRef` option will be ignored.']}),x()):P?P.current:void p({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:N})}({contentRef:b,optionalContent:f,suppressErrors:Q});if(!z)return;const B=z.cloneNode(!0),ae=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),ie=B.querySelectorAll("img"),c=B.querySelectorAll("video"),l=H?H.length:0;return{contentNode:z,clonedContentNode:B,clonedImgNodes:ie,clonedVideoNodes:c,numResourcesToLoad:(X?0:ae.length)+ie.length+c.length+l,originalCanvasNodes:z.querySelectorAll("canvas")}}(te,_);if(!Z)return void p({messages:["There is nothing to print"],suppressErrors:$});const q=function(f,K,b){const{suppressErrors:H}=f,X=[],Q=[];return function(z,B){X.includes(z)?p({level:"debug",messages:["Tried to mark a resource that has already been handled",z],suppressErrors:H}):(B?(p({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...B],suppressErrors:H}),Q.push(z)):X.push(z),X.length+Q.length===K&&E(b,f))}}(_,Z.numResourcesToLoad,ne);(function(f,K,b,H){f.onload=()=>{A(f,K,b,H)},document.body.appendChild(f)})(ne,q,Z,_)}S(R,!0),k?k().then(()=>{se()}).catch(_=>{C==null||C("onBeforePrint",w(_))}):se()},[a,n,r,g,T,F,I,D,k,C,V,R,U,$])}return y}()})}(le)),le.exports}Re();const Oe=({isOpen:s,onClose:t,orderId:h})=>{const[o,j]=Y.useState(null),[d,y]=Y.useState(null),[v,p]=Y.useState(!1),S=Y.useRef(null);if(!s)return null;const w=m=>{const u=m.target.files[0];if(u)if(j(u),u.type.startsWith("image/")){const A=URL.createObjectURL(u);y(A)}else y(null)},E=m=>{m.preventDefault();const u=m.dataTransfer.files[0];if(u)if(j(u),u.type.startsWith("image/")){const A=URL.createObjectURL(u);y(A)}else y(null)},i=async()=>{if(o){p(!0);try{const u=(await Ce([o]))[0];await pe.post("/admin/orders/updateDelhiveryReceipt",{delhiveryReceipt:u,orderId:h})&&(j(null),y(null),t())}catch(m){console.log(m),je(error)}finally{p(!1)}}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center glass h-full bg-opacity-50 backdrop-blur-sm transition-all",onClick:t,children:e.jsxs("div",{className:"relative bg-white w-[90%] sm:w-[500px] max-w-[95%] rounded-lg shadow-xl p-6",onClick:m=>m.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-red-500",children:e.jsx(ye,{size:20})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Upload Delhivery Receipt"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-blue-400 transition-colors",onClick:()=>S.current.click(),onDrop:E,onDragOver:m=>m.preventDefault(),children:[e.jsx(be,{className:"mx-auto text-4xl text-blue-500 mb-2"}),e.jsxs("p",{className:"text-gray-600 text-sm",children:["Drag & drop a file here or"," ",e.jsx("span",{className:"text-blue-600 underline",children:"click to browse"})]}),o&&d&&e.jsxs("div",{className:"mt-4",children:[e.jsx("img",{src:d,alt:"Preview",className:"mx-auto max-h-48 rounded shadow"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:o.name})]}),o&&!d&&e.jsxs("p",{className:"mt-3 text-sm text-green-600 font-medium",children:["Selected: ",o.name]}),e.jsx("input",{type:"file",accept:"application/pdf,image/*",ref:S,onChange:w,className:"hidden"})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 text-sm text-gray-700 border border-gray-300 rounded hover:bg-gray-100",disabled:v,children:"Cancel"}),e.jsx("button",{onClick:i,disabled:!o||v,className:`px-4 py-2 text-sm text-white rounded ${o&&!v?"bg-gray-900 hover:bg-blue-700":"bg-gray-400 cursor-not-allowed"}`,children:v?"Uploading...":"Upload"})]})]})})},Le=({receipt:s,printRef:t})=>{var d,y,v,p,S,w,E;const h=i=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}).format(i),o=i=>{const m=(i==null?void 0:i.price)||0,u=(i!=null&&i.withFallPico?re:0)+(i!=null&&i.withTassels?oe:0),A=m+u;return{finalPricePerUnit:A,total:A*(i==null?void 0:i.quantity)}},j=(d=s==null?void 0:s.items)==null?void 0:d.reduce((i,m)=>{const{total:u}=o(m);return i+u},0);return e.jsx("div",{className:"p-4 hidden",children:e.jsxs("div",{ref:t,className:"mt-6 p-6 bg-white shadow-lg rounded text-sm font-sans",children:[e.jsxs("div",{className:"border-b pb-4 mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold mb-1",children:"Order Receipt"}),e.jsxs("p",{className:"text-gray-600",children:["Order ID: ",s==null?void 0:s.id]}),e.jsxs("p",{className:"text-gray-600",children:["Date: ",new Date(s==null?void 0:s.date).toLocaleString()]})]}),e.jsxs("div",{className:"mb-6 capitalize",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Customer Info"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",s==null?void 0:s.customerName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",s==null?void 0:s.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",s==null?void 0:s.phone]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",s!=null&&s.shippingAddress?`${(y=s==null?void 0:s.shippingAddress)==null?void 0:y.street}, ${(v=s==null?void 0:s.shippingAddress)==null?void 0:v.city}, ${(p=s==null?void 0:s.shippingAddress)==null?void 0:p.postalCode},${(S=s==null?void 0:s.shippingAddress)==null?void 0:S.state}, ${(w=s==null?void 0:s.shippingAddress)==null?void 0:w.country}`:"N/A"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Order Items"}),e.jsxs("table",{className:"min-w-full table-auto border border-gray-300 text-xs sm:text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border p-2 text-left",children:"Product"}),e.jsx("th",{className:"border p-2",children:"Qty"}),e.jsx("th",{className:"border p-2",children:"With Fall Pico"}),e.jsx("th",{className:"border p-2",children:"With Tassels"}),e.jsx("th",{className:"border p-2",children:"Unit Price"}),e.jsx("th",{className:"border p-2",children:"Total"})]})}),e.jsx("tbody",{children:(E=s==null?void 0:s.items)==null?void 0:E.map((i,m)=>{var M;const{finalPricePerUnit:u,total:A}=o(i);return e.jsxs("tr",{className:"text-center",children:[e.jsx("td",{className:"border p-2 text-left",children:((M=i==null?void 0:i.product)==null?void 0:M.name)||"Product"}),e.jsx("td",{className:"border p-2",children:i==null?void 0:i.quantity}),e.jsx("td",{className:"border p-2",children:i!=null&&i.withFallPico?`Yes +â‚¹${re}`:"No"}),e.jsx("td",{className:"border p-2",children:i!=null&&i.withTassels?`Yes +â‚¹${oe}`:"No"}),e.jsx("td",{className:"border p-2",children:h(u)}),e.jsx("td",{className:"border p-2",children:h(A)})]},m)})})]})]}),e.jsxs("div",{className:"text-right mb-6",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Amount (Inclusive of 5% GST):"})," ",h(j)]}),e.jsx("p",{className:"text-gray-600 italic",children:"GST (5%) is already included in the above amount."}),e.jsxs("p",{children:[e.jsx("strong",{children:"Shipping:"})," ",(s==null?void 0:s.shipping)||"Free"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Payment Method:"})," ",(s==null?void 0:s.paymentMethod)||"N/A"]})]}),e.jsxs("div",{className:"border-t pt-4 text-center text-sm",children:[e.jsx("p",{className:"font-semibold text-base",children:"Thank you for shopping with us!"}),e.jsx("p",{className:"text-gray-700",children:"Srijan Fabs Pvt. Ltd."}),e.jsx("p",{className:"text-gray-700",children:"Contact: +91 89605 00991"})]})]})})},ee={hidden:{opacity:0,y:20},visible:s=>({opacity:1,y:0,transition:{delay:s*.2,duration:.4}})},ce=({status:s,type:t="default"})=>{const h=(o,j)=>{const d=o==null?void 0:o.toLowerCase();if(j==="payment")switch(d){case"paid":return"bg-emerald-50 text-emerald-700 border-emerald-200";case"failed":case"pending":return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}switch(d){case"delivered":return"bg-emerald-50 text-emerald-700 border-emerald-200";case"shipped":case"out for delivery":return"bg-blue-50 text-blue-700 border-blue-200";case"pending":return"bg-amber-50 text-amber-700 border-amber-200";case"canceled":return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}};return e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ${h(s,t)}`,children:s})},Ie=({order:s,onPrint:t})=>{const[h,o]=Y.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs(W.div,{custom:0,initial:"hidden",animate:"visible",variants:ee,className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-2",children:"Admin Order Management"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Order ID:"," ",e.jsx("span",{className:"font-mono font-medium",children:(s==null?void 0:s.razorpay_order_id)||"N/A"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-center",children:[e.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-800 hover:text-blue-600 transition-colors border rounded-sm bg-gray-100",children:[e.jsx(Ne,{size:18}),"Print Receipt"]}),e.jsxs("button",{onClick:()=>o(!0),className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-800 hover:text-blue-600 transition-colors border rounded-sm bg-gray-100",children:[e.jsx(we,{size:18}),"Upload Delhivery Receipt"]}),e.jsxs(me,{to:"/admin/orders",className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-800 hover:text-blue-600 transition-colors",children:[e.jsx(ue,{size:16}),"Back to Orders"]})]})]}),e.jsx(Oe,{isOpen:h,onClose:()=>o(!1),orderId:s==null?void 0:s._id})]})},Ue=({user:s})=>e.jsxs(W.div,{custom:1,initial:"hidden",animate:"visible",variants:ee,className:"space-y-4",children:[e.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-gray-800",children:[e.jsx(xe,{size:20}),"Customer Information"]}),e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-100 rounded-xl p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(xe,{size:20,className:"text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Customer Name"}),e.jsxs("p",{className:"font-semibold text-gray-800 capitalize",children:[s==null?void 0:s.firstName," ",s==null?void 0:s.lastName]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(Ae,{size:20,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Email Address"}),e.jsx("p",{className:"font-medium text-gray-800 lowercase",children:s==null?void 0:s.email})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Pe,{size:20,className:"text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Phone Number"}),e.jsx("p",{className:"font-semibold text-gray-800",children:s==null?void 0:s.phone})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(Se,{size:20,className:"text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Customer ID"}),e.jsx("p",{className:"font-mono text-sm text-gray-800",children:s==null?void 0:s._id})]})]})]})]})})]}),ze=({order:s,formatINR:t})=>{const h=(s==null?void 0:s.totalAmount)+(s.discount||0);return e.jsx(W.div,{custom:2,initial:"hidden",animate:"visible",variants:ee,className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100 rounded-xl p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Order Date"}),e.jsx("p",{className:"text-sm font-medium text-gray-800",children:new Date(s.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(s.createdAt).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Gross Amount"}),e.jsxs("p",{className:"text-sm font-medium text-gray-800",children:["â‚¹",t(h)]})]}),(s==null?void 0:s.discount)>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Coupon Discount"}),e.jsxs("p",{className:"text-sm font-medium text-red-600",children:["- â‚¹",t(s==null?void 0:s.discount)]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Net Payable"}),e.jsxs("p",{className:"text-xl font-bold text-gray-800",children:["â‚¹",t(s==null?void 0:s.totalAmount)]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Payment Status"}),e.jsx(ce,{status:s==null?void 0:s.paymentStatus,type:"payment"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Delivery Status"}),e.jsx(ce,{status:s==null?void 0:s.deliveryStatus})]})]})})},Me=({item:s,index:t,formatINR:h,order:o})=>{var A,M,a,n,r,g;const j=Ee(),d=(A=s==null?void 0:s.product)==null?void 0:A.price,y=(M=s==null?void 0:s.product)==null?void 0:M.isOfferAplied,v=(o==null?void 0:o.offer)||0,p=s!=null&&s.withFallPico?re:0,S=s!=null&&s.withTassels?oe:0,w=p+S,E=y?d*v/100:0,i=d-E,m=i+w,u=m*(s==null?void 0:s.quantity);return e.jsx(W.div,{whileHover:{scale:1.01},transition:{duration:.2},className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{onClick:()=>{var T;return j(`/product/${(T=s==null?void 0:s.product)==null?void 0:T._id}`)},src:((a=s==null?void 0:s.product)==null?void 0:a.images[0])||"/Product_Placeholder.webp",alt:(n=s==null?void 0:s.product)==null?void 0:n.name,className:"w-24 h-24 sm:w-28 sm:h-28 object-cover rounded-sm cursor-pointer"})}),e.jsxs("div",{className:"flex-1 space-y-4 text-sm text-gray-700",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 capitalize",children:(r=s==null?void 0:s.product)==null?void 0:r.name}),e.jsxs("div",{className:"flex gap-4 mt-1 text-xs text-gray-500",children:[e.jsxs("span",{children:["Product ID: ",e.jsx("code",{children:(g=s==null?void 0:s.product)==null?void 0:g._id})]}),e.jsxs("span",{children:["Qty: ",e.jsx("strong",{children:s==null?void 0:s.quantity})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-4",children:[e.jsx("h5",{className:"text-sm font-bold text-gray-900",children:"ðŸ§¾ Price Summary"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-semibold text-gray-700",children:"Base Price"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Price per unit"}),e.jsxs("span",{children:["â‚¹",h(d)]})]}),y&&v>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsxs("span",{children:["Offer Discount (",v,"%)"]}),e.jsxs("span",{children:["- â‚¹",h(E)]})]}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Price After Offer"}),e.jsxs("span",{children:["â‚¹",h(i)]})]})]}):e.jsxs("div",{className:"flex justify-between font-medium text-gray-600",children:[e.jsx("span",{children:"Offer Not Applied"}),e.jsxs("span",{children:["â‚¹",h(i)]})]})]}),(s.withFallPico||s.withTassels)&&e.jsxs("div",{className:"space-y-1 pt-2",children:[e.jsx("p",{className:"font-semibold text-gray-700",children:"Add-ons"}),s.withFallPico&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"+ Fall Pico"}),e.jsxs("span",{children:["+ â‚¹",re]})]}),s.withTassels&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"+ Tassels"}),e.jsxs("span",{children:["+ â‚¹",oe]})]})]}),e.jsxs("div",{className:"border-t pt-2 space-y-1",children:[e.jsx("p",{className:"font-semibold text-gray-700",children:"Final Unit Price"}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Final Price per Unit"}),e.jsxs("span",{children:["â‚¹",h(m)]})]})]}),e.jsxs("div",{className:"border-t pt-2 space-y-1",children:[e.jsx("p",{className:"font-semibold text-gray-700",children:"Gross Total"}),e.jsxs("div",{className:"flex justify-between font-bold text-gray-800",children:[e.jsxs("span",{children:[s.quantity," Ã— â‚¹",h(m)]}),e.jsxs("span",{children:["â‚¹",h(u)]})]})]})]})]})]})},t)},We=({order:s})=>{var t,h,o,j,d,y,v,p,S,w,E,i;return e.jsxs(W.div,{custom:4,initial:"hidden",animate:"visible",variants:ee,className:"space-y-4",children:[e.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-gray-800",children:[e.jsx(ke,{size:20}),"Shipping & Delivery"]}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Delivery Address"}),e.jsx("div",{className:"text-sm text-gray-800 space-y-1",children:e.jsxs("p",{className:"text-sm text-foreground leading-relaxed",children:[((t=s==null?void 0:s.shippingAddress)==null?void 0:t.street)||((h=s==null?void 0:s.shippingAddressSnapshot)==null?void 0:h.street),e.jsx("br",{}),((o=s==null?void 0:s.shippingAddress)==null?void 0:o.city)||((j=s==null?void 0:s.shippingAddressSnapshot)==null?void 0:j.city),","," ",((d=s==null?void 0:s.shippingAddress)==null?void 0:d.state)||((y=s==null?void 0:s.shippingAddressSnapshot)==null?void 0:y.state),e.jsx("br",{}),((v=s==null?void 0:s.shippingAddress)==null?void 0:v.postalCode)||((p=s==null?void 0:s.shippingAddressSnapshot)==null?void 0:p.postalCode),","," ",((S=s==null?void 0:s.shippingAddress)==null?void 0:S.country)||((w=s==null?void 0:s.shippingAddressSnapshot)==null?void 0:w.country),e.jsx("br",{}),e.jsxs("span",{className:"font-medium",children:["Phone:"," ",((E=s==null?void 0:s.shippingAddress)==null?void 0:E.phone)||((i=s==null?void 0:s.shippingAddressSnapshot)==null?void 0:i.phone)]})]})})]}),(s==null?void 0:s.deliveredAt)&&e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Delivery Completed"}),e.jsx("p",{className:"text-sm font-medium text-gray-800",children:new Date(s==null?void 0:s.deliveredAt).toLocaleString("en-IN")})]})]})})]})},$e=({order:s})=>e.jsxs(W.div,{custom:5,initial:"hidden",animate:"visible",variants:ee,className:"space-y-4",children:[e.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-gray-800",children:[e.jsx(Te,{size:20}),"Payment Details"]}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Payment Method"}),e.jsx("p",{className:"text-sm font-medium text-gray-800 capitalize",children:s==null?void 0:s.paymentMethod})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Payment Status"}),e.jsx(ce,{status:s==null?void 0:s.paymentStatus,type:"payment"})]}),s.razorpay_order_id&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Razorpay Order ID"}),e.jsx("p",{className:"text-sm font-mono text-gray-800",children:s==null?void 0:s.razorpay_order_id})]}),s.paidAt&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Payment Date"}),e.jsx("p",{className:"text-sm font-medium text-gray-800",children:new Date(s.paidAt).toLocaleString("en-IN")})]})]})})]});function Ge(){var S,w,E,i,m,u,A,M,a;const{id:s}=ve(),[t,h]=Y.useState(null),[o,j]=Y.useState(!0);console.log("Order From ADMINORDERDE",t);const d=Y.useRef(),y={id:(t==null?void 0:t.razorpay_order_id)||"",date:(t==null?void 0:t.createdAt)||"",customerName:`${((S=t==null?void 0:t.user)==null?void 0:S.firstName)||""} ${((w=t==null?void 0:t.user)==null?void 0:w.lastName)||""}`,email:((E=t==null?void 0:t.user)==null?void 0:E.email)||"",phone:((i=t==null?void 0:t.shippingAddressSnapshot)==null?void 0:i.phone)||"",shippingAddress:{street:((m=t==null?void 0:t.shippingAddressSnapshot)==null?void 0:m.street)||"",city:((u=t==null?void 0:t.shippingAddressSnapshot)==null?void 0:u.city)||"",state:((A=t==null?void 0:t.shippingAddressSnapshot)==null?void 0:A.state)||"",country:((M=t==null?void 0:t.shippingAddressSnapshot)==null?void 0:M.country)||"",postalCode:((a=t==null?void 0:t.shippingAddressSnapshot)==null?void 0:a.postalCode)||""},items:((t==null?void 0:t.items)||[]).map(n=>{var r,g;return{name:((r=n==null?void 0:n.product)==null?void 0:r.name)||"Product",quantity:(n==null?void 0:n.quantity)||0,price:((g=n==null?void 0:n.product)==null?void 0:g.price)||0,withFallPico:(n==null?void 0:n.withFallPico)||!1,withTassels:(n==null?void 0:n.withTassels)||!1}}),subtotal:(t==null?void 0:t.finalPrice)||0,shipping:"Free",paymentMethod:(t==null?void 0:t.paymentMethod)||"N/A"};Y.useEffect(()=>{j(!0),pe.get(`/admin/orders/order/${s}`).then(n=>{h(n.data.data),j(!1)}).catch(n=>{console.error("Error fetching order:",n),h(null),j(!1)})},[s]);const v=n=>(n||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2});if(o)return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"animate-pulse space-y-8",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-32 bg-gray-200 rounded"}),e.jsx("div",{className:"h-48 bg-gray-200 rounded"})]})})});if(t===null)return e.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"text-center py-16",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx(de,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Order Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"The order you're looking for doesn't exist or may have been removed."}),e.jsx(W.div,{whileHover:{x:-5},transition:{duration:.2},children:e.jsxs(me,{to:"/admin/orders",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:[e.jsx(ue,{size:16}),"Back to Orders"]})})]})});const p=()=>{const n=d.current.innerHTML,r=document.body.innerHTML;document.body.innerHTML=n,window.print(),document.body.innerHTML=r,window.location.reload()};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs(W.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},className:"space-y-8",children:[e.jsx(Ie,{order:t,onPrint:()=>p()}),e.jsx(Ue,{user:t.user}),e.jsx(ze,{order:t,formatINR:v}),e.jsxs(W.div,{custom:3,initial:"hidden",animate:"visible",variants:ee,className:"space-y-4",children:[e.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-gray-800",children:[e.jsx(de,{size:20}),"Order Items (",t==null?void 0:t.items.length,")"]}),e.jsx("div",{className:"space-y-4",children:t==null?void 0:t.items.map((n,r)=>e.jsx(Me,{item:n,index:r,formatINR:v,order:t},n._id))})]}),e.jsx(We,{order:t}),e.jsx($e,{order:t}),e.jsx(Le,{receipt:y,printRef:d}),e.jsx(Fe,{imageUrl:t==null?void 0:t.delhiveryReceipt})]})})})}export{Ge as default};
